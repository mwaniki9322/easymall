{% extends 'admin_base.html' %}
{% block title %}
    {{ account.full_name }} - Users - Admin
{% endblock %}
{% block css %}
    <script>
        const activeDashboardSidebar = 'users';
    </script>
{% endblock %}
{% block content %}
    <h2 class="text-center">{{ account.full_name }}</h2>
    <div class="row">
        <div class="col-lg-6 mx-auto">
            <div class="text-center mb-3">
                <img src="{{ account.get_pic }}" alt="" style="width: 100px; border-radius: 10px" class="my-pic">
            </div>
            <div class="card mb-3">
                <div class="card-header">
                    <h5 class="m-0 py-2">Profile details</h5>
                </div>
                <div class="card-body">
                    <form>
                      <div class="form-group">
                        <label for="profile-username">Username</label>
                        <input type="text" class="form-control" id="profile-username" value="{{ account.username }}" readonly>
                      </div>
                        <div class="form-group">
                        <label for="profile-email">Email</label>
                        <input type="email" class="form-control" id="profile-email" value="{{ account.email }}" readonly>
                      </div>
                      <div class="form-group">
                        <label for="profile-phone">Phone number</label>
                        <input type="tel" class="form-control" id="profile-phone" value="{{ account.phone_number }}" readonly>
                      </div>
                        <div class="form-group">
                        <label for="profile-address">Address</label>
                        <input type="text" class="form-control" id="profile-address" readonly
                            value="{% if profile %}{{ profile.address_line_1 }}{% endif %}">
                      </div>
                    <div class="form-group">
                        <label for="profile-city">City</label>
                        <input type="text" class="form-control" id="profile-city" readonly
                            value="{% if profile %}{{ profile.city }}{% endif %}">
                      </div>
                    <div class="form-group">
                        <label for="profile-country">Country</label>
                        <input type="text" class="form-control" id="profile-country" readonly
                            value="{% if profile %}{{ profile.get_country_name }}{% endif %}">
                      </div>

                    </form>
                <button class="btn btn-danger" data-toggle="modal" data-target="#delete-modal">
                            Delete user
                        </button>
                </div>
            </div>
            <div class="card">
                <div class="card-header">
                    <h5 class="m-0 py-2">Change password</h5>
                </div>
                <div class="card-body">
                    <form method="post" action="{% url 'admin_change_user_password' account.pk %}" class="custom-submit">
                        {% csrf_token %}
                        <ul class="form-errors text-danger fs-14" data-label="__all__"
                            style="display: none">

                        </ul>
                      <div class="form-group">
                        <label for="new-password">New password</label>
                        <input type="password" class="form-control" id="new-password" maxlength="254"
                            name="new_password1" required>
                        <ul class="form-errors text-danger fs-14 mt-1" data-label="new_password1"
                                style="display: none"></ul>
                      </div>
                      <div class="form-group">
                        <label for="confirm-password">Confirm password</label>
                        <input type="password" class="form-control" id="confirm-password" maxlength="254"
                            name="new_password2" required>
                            <ul class="form-errors text-danger fs-14 mt-1" data-label="new_password2"
                                style="display: none"></ul>
                      </div>

                       <button class="btn btn-primary submit-btn" type="submit"
                            data-working="Processing...">
                            Change password
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>



<!-- Modal -->
<div class="modal fade" id="delete-modal" tabindex="-1" role="dialog" aria-labelledby="delete-modal-title" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-sm" role="document">
    <div class="modal-content">
      <div class="modal-header bg-danger text-white">
        <h5 class="modal-title" id="delete-modal-title">Delete user</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true" class="text-white">&times;</span>
        </button>
      </div>
      <div class="modal-body text-center">
        <form method="post" action="{% url 'admin_delete_user' account.pk %}">
            {% csrf_token %}
            <p class="my-2 fs-14">
                Are you sure you want to delete the user account for <strong>{{ account.full_name }}</strong>?
            </p>
            <button class="btn btn-danger" type="submit">
                Sure, delete
            </button>
        </form>
      </div>

    </div>
  </div>
</div>
{% endblock %}